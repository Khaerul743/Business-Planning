2025-12-08 10:33:31,361 | ERROR | src.app.middlewares.error_handler | Unexpected error: InternalServerError() takes no keyword arguments
Traceback (most recent call last):
  File "D:\PROJECT_WA\src\app\middlewares\error_handler.py", line 15, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\main.py", line 20, in root
    raise InternalServerError()
          ~~~~~~~~~~~~~~~~~~~^^
  File "D:\PROJECT_WA\src\core\exceptions\internal_exception.py", line 8, in __init__
    super().__init__(
    ~~~~~~~~~~~~~~~~^
        status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        },
        ^^
    )
    ^
  File "D:\PROJECT_WA\src\core\exceptions\base.py", line 32, in __init__
    super().__init__(status_code=self.status_code, detail=self.detail)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: InternalServerError() takes no keyword arguments
2025-12-08 10:47:31,045 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {'nama': 'str'}}]
2025-12-08 10:48:32,692 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {'nama': 'str'}}, {'type': 'missing', 'loc': ('body', 'umur'), 'msg': 'Field required', 'input': {'nama': 'str'}}]
2025-12-08 10:49:14,271 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {'nama': 'str'}}, {'type': 'missing', 'loc': ('body', 'umur'), 'msg': 'Field required', 'input': {'nama': 'str'}}]
2025-12-08 10:49:32,284 | ERROR | src.app.middlewares.error_handler | Unexpected error: InternalServerError() takes no keyword arguments
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\main.py", line 30, in root
    return InternalServerError()
  File "D:\PROJECT_WA\src\core\exceptions\internal_exception.py", line 8, in __init__
    super().__init__(
    ~~~~~~~~~~~~~~~~^
        status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        },
        ^^
    )
    ^
  File "D:\PROJECT_WA\src\core\exceptions\base.py", line 31, in __init__
    super().__init__(status_code=self.status_code, detail=self.detail)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: InternalServerError() takes no keyword arguments
2025-12-08 10:50:57,012 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'umur'), 'msg': 'Field required', 'input': {'name': 'str', 'umur3': 1}}]
2025-12-08 10:56:18,334 | ERROR | src.app.middlewares.error_handler | Custom Error: INTERNAL_SERVER_ERROR
2025-12-08 10:58:22,535 | ERROR | src.app.middlewares.error_handler | Unexpected error: 
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\main.py", line 30, in root
    raise Exception()
Exception
2025-12-08 20:30:35,450 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'object'), 'msg': 'Field required', 'input': {'name': 'str', 'umur': 1}}, {'type': 'missing', 'loc': ('body', 'entry'), 'msg': 'Field required', 'input': {'name': 'str', 'umur': 1}}]
2025-12-08 20:35:08,594 | INFO | src.infrastructure.meta.wa_manager | Webhook verified
2025-12-08 20:36:40,098 | INFO | src.infrastructure.meta.wa_manager | Webhook verified
2025-12-08 20:38:08,775 | INFO | src.infrastructure.meta.wa_manager | Webhook verified
2025-12-08 20:39:03,417 | INFO | src.infrastructure.meta.wa_manager | Webhook verified
2025-12-08 20:39:39,769 | INFO | src.infrastructure.meta.wa_manager | Send text message is successfully to number 6285747515372
2025-12-08 20:39:41,360 | ERROR | src.app.controllers.whatsapp_controller | Unexpected error while send message: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:41,464 | ERROR | src.app.middlewares.error_handler | Unexpected error: cannot access local variable 'from_number' where it is not associated with a value
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\src\app\routes\whatsapp_route.py", line 28, in receive_webhook
    controller.send_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 21, in send_message
    raise e
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 16, in send_message
    self.whatsapp_service.send_text_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 40, in send_text_message
    from_number, message_type, text = self._get_detail_message(payload)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 37, in _get_detail_message
    return from_number, message_type, incoming_text
           ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:43,732 | ERROR | src.app.controllers.whatsapp_controller | Unexpected error while send message: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:43,738 | ERROR | src.app.middlewares.error_handler | Unexpected error: cannot access local variable 'from_number' where it is not associated with a value
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\src\app\routes\whatsapp_route.py", line 28, in receive_webhook
    controller.send_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 21, in send_message
    raise e
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 16, in send_message
    self.whatsapp_service.send_text_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 40, in send_text_message
    from_number, message_type, text = self._get_detail_message(payload)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 37, in _get_detail_message
    return from_number, message_type, incoming_text
           ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:44,931 | ERROR | src.app.controllers.whatsapp_controller | Unexpected error while send message: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:44,932 | ERROR | src.app.middlewares.error_handler | Unexpected error: cannot access local variable 'from_number' where it is not associated with a value
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\src\app\routes\whatsapp_route.py", line 28, in receive_webhook
    controller.send_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 21, in send_message
    raise e
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 16, in send_message
    self.whatsapp_service.send_text_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 40, in send_text_message
    from_number, message_type, text = self._get_detail_message(payload)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 37, in _get_detail_message
    return from_number, message_type, incoming_text
           ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:47,482 | ERROR | src.app.controllers.whatsapp_controller | Unexpected error while send message: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:47,499 | ERROR | src.app.middlewares.error_handler | Unexpected error: cannot access local variable 'from_number' where it is not associated with a value
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\src\app\routes\whatsapp_route.py", line 28, in receive_webhook
    controller.send_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 21, in send_message
    raise e
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 16, in send_message
    self.whatsapp_service.send_text_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 40, in send_text_message
    from_number, message_type, text = self._get_detail_message(payload)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 37, in _get_detail_message
    return from_number, message_type, incoming_text
           ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:40:07,174 | ERROR | src.app.controllers.whatsapp_controller | Unexpected error while send message: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:40:07,181 | ERROR | src.app.middlewares.error_handler | Unexpected error: cannot access local variable 'from_number' where it is not associated with a value
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\src\app\routes\whatsapp_route.py", line 28, in receive_webhook
    controller.send_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 21, in send_message
    raise e
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 16, in send_message
    self.whatsapp_service.send_text_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 40, in send_text_message
    from_number, message_type, text = self._get_detail_message(payload)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 37, in _get_detail_message
    return from_number, message_type, incoming_text
           ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:44:40,415 | INFO | src.infrastructure.meta.wa_manager | Send text message is successfully to number 6285747515372
2025-12-08 20:46:15,235 | INFO | src.infrastructure.meta.wa_manager | Send text message is successfully to number 6285747515372
2025-12-08 20:50:35,954 | INFO | src.infrastructure.meta.wa_manager | Send text message is successfully to number 6285747515372
2025-12-15 08:53:13,922 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {'name': 'str', 'umur': 1}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {'name': 'str', 'umur': 1}}]
2025-12-15 08:54:39,830 | WARNING | src.domain.services.auth_service | Register user failed: code=None error=Password must be at least 6 characters long
2025-12-15 08:54:39,832 | ERROR | src.app.middlewares.error_handler | Custom Error: UNKNOWN
2025-12-15 08:58:48,330 | WARNING | src.domain.services.auth_service | Register user failed: code=None error=Password must be at least 6 characters long
2025-12-15 08:58:48,334 | ERROR | src.app.middlewares.error_handler | Custom Error: PASSWORD_TOO_WEAK
2025-12-15 08:59:18,290 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'value_error', 'loc': ('body', 'email'), 'msg': 'value is not a valid email address: An email address must have an @-sign.', 'input': 'khaerulgmail.com', 'ctx': {'reason': 'An email address must have an @-sign.'}}]
2025-12-15 08:59:49,419 | WARNING | src.domain.services.auth_service | Register user failed: code=None error=Unexpected error while register new user: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
2025-12-15 08:59:49,421 | ERROR | src.app.controllers.auth_controller | Unexpected error while register new user: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
2025-12-15 08:59:49,422 | ERROR | src.app.middlewares.error_handler | Unexpected error: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\auth_route.py", line 19, in register
    result = await controller.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 42, in register_new_user
    raise e
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 25, in register_new_user
    result = await self.auth_service.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\auth_service.py", line 42, in register_new_user
    self.raise_error_usecase(reg_user)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\base.py", line 12, in raise_error_usecase
    raise exception
  File "D:\PROJECT_WA\src\domain\usecases\auth\register_new_user.py", line 70, in execute
    hashed_password = self.password_hashed.hash_password(password)
  File "D:\PROJECT_WA\src\core\utils\hash.py", line 11, in hash_password
    return self.pwd_context.hash(password)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\context.py", line 2258, in hash
    return record.hash(secret, **kwds)
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 779, in hash
    self.checksum = self._calc_checksum(secret)
                    ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 591, in _calc_checksum
    self._stub_requires_backend()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2254, in _stub_requires_backend
    cls.set_backend()
    ~~~~~~~~~~~~~~~^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2156, in set_backend
    return owner.set_backend(name, dryrun=dryrun)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2163, in set_backend
    return cls.set_backend(name, dryrun=dryrun)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2188, in set_backend
    cls._set_backend(name, dryrun)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2311, in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2224, in _set_backend
    ok = loader(**kwds)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 626, in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 421, in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
       ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 380, in detect_wrap_bug
    if verify(secret, bug_hash):
       ~~~~~~^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 792, in verify
    return consteq(self._calc_checksum(secret), chk)
                   ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 655, in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
2025-12-15 09:15:05,403 | WARNING | src.domain.services.auth_service | Register user failed: code=None error=Unexpected error while register new user: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-15 09:15:05,496 | ERROR | src.app.controllers.auth_controller | Unexpected error while register new user: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-15 09:15:05,903 | ERROR | src.app.middlewares.error_handler | Unexpected error: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\auth_route.py", line 19, in register
    result = await controller.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 42, in register_new_user
    raise e
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 25, in register_new_user
    result = await self.auth_service.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\auth_service.py", line 42, in register_new_user
    self.raise_error_usecase(reg_user)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\base.py", line 12, in raise_error_usecase
    raise exception
  File "D:\PROJECT_WA\src\domain\usecases\auth\register_new_user.py", line 73, in execute
    await self.user_repository.create_user(
        name=name, email=email, hashed_password=hashed_password
    )
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 59, in create_user
    return User.model_validate(payload)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\pydantic\main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj,
        ^^^^
    ...<5 lines>...
        by_name=by_name,
        ^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-15 09:18:24,122 | WARNING | src.domain.services.auth_service | Register user failed: code=EMAIL_IN_USE error=Email is already in use
2025-12-15 09:18:24,230 | ERROR | src.app.middlewares.error_handler | Custom Error: EMAIL_ALREADY_EXISTS
2025-12-15 09:18:39,981 | WARNING | src.domain.services.auth_service | Register user failed: code=None error=Unexpected error while register new user: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-15 09:18:39,987 | ERROR | src.app.controllers.auth_controller | Unexpected error while register new user: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-15 09:18:40,002 | ERROR | src.app.middlewares.error_handler | Unexpected error: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\auth_route.py", line 19, in register
    result = await controller.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 42, in register_new_user
    raise e
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 25, in register_new_user
    result = await self.auth_service.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\auth_service.py", line 42, in register_new_user
    self.raise_error_usecase(reg_user)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\base.py", line 12, in raise_error_usecase
    raise exception
  File "D:\PROJECT_WA\src\domain\usecases\auth\register_new_user.py", line 73, in execute
    await self.user_repository.create_user(
        name=name, email=email, hashed_password=hashed_password
    )
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 59, in create_user
    return User.model_validate(payload)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\pydantic\main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj,
        ^^^^
    ...<5 lines>...
        by_name=by_name,
        ^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-15 21:26:06,978 | WARNING | src.domain.services.auth_service | khaerulll@gmail.com login failed: Wrong password
2025-12-15 21:26:06,992 | ERROR | src.app.middlewares.error_handler | Custom Error: INVALID_CREDENTIALS
2025-12-15 21:27:42,968 | WARNING | src.domain.services.auth_service | khaerulll@gmail.co login failed: User not found
2025-12-15 21:27:42,972 | ERROR | src.app.middlewares.error_handler | Custom Error: EMAIL_NOT_FOUND
2025-12-24 21:30:55,782 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-24 21:32:08,922 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-24 21:32:24,369 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-24 21:37:17,362 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-24 21:38:02,334 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 19:23:14,185 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 19:24:04,997 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 19:25:10,912 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 19:33:34,795 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 19:33:45,802 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 19:36:08,071 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('query', 'self'), 'msg': 'Field required', 'input': None}]
2025-12-26 19:37:01,711 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\user_route.py", line 18, in get_me
    result_data = await controller.get_current_user()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\user_controller.py", line 16, in get_current_user
    return await self.user_service.get_current_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\user_service.py", line 15, in get_current_user
    user = await self.user_repo.get_by_context_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 33, in get_by_context_user
    await self.db.table("Users")
    ...<3 lines>...
    .execute()
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 115, in execute
    raise APIError(
    ...<6 lines>...
    )
postgrest.exceptions.APIError: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-26 19:46:44,555 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\user_route.py", line 19, in get_me
    result_data = await controller.get_current_user()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\user_controller.py", line 16, in get_current_user
    return await self.user_service.get_current_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\user_service.py", line 15, in get_current_user
    user = await self.user_repo.get_by_context_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 33, in get_by_context_user
    await self.db.table("Users")
    ...<3 lines>...
    .execute()
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 115, in execute
    raise APIError(
    ...<6 lines>...
    )
postgrest.exceptions.APIError: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-26 19:46:52,516 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\user_route.py", line 19, in get_me
    result_data = await controller.get_current_user()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\user_controller.py", line 16, in get_current_user
    return await self.user_service.get_current_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\user_service.py", line 15, in get_current_user
    user = await self.user_repo.get_by_context_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 33, in get_by_context_user
    await self.db.table("Users")
    ...<3 lines>...
    .execute()
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 115, in execute
    raise APIError(
    ...<6 lines>...
    )
postgrest.exceptions.APIError: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-26 19:48:57,539 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\user_route.py", line 19, in get_me
    result_data = await controller.get_current_user()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\user_controller.py", line 16, in get_current_user
    return await self.user_service.get_current_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\user_service.py", line 15, in get_current_user
    user = await self.user_repo.get_by_context_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 33, in get_by_context_user
    await self.db.table("Users")
    ...<3 lines>...
    .execute()
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 115, in execute
    raise APIError(
    ...<6 lines>...
    )
postgrest.exceptions.APIError: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-26 19:54:21,923 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\user_route.py", line 22, in get_me
    result_data = await controller.get_current_user()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\user_controller.py", line 16, in get_current_user
    return await self.user_service.get_current_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\user_service.py", line 15, in get_current_user
    user = await self.user_repo.get_by_context_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 33, in get_by_context_user
    await self.db.table("Users")
    ...<3 lines>...
    .execute()
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 115, in execute
    raise APIError(
    ...<6 lines>...
    )
postgrest.exceptions.APIError: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-26 19:54:27,834 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\user_route.py", line 22, in get_me
    result_data = await controller.get_current_user()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\user_controller.py", line 16, in get_current_user
    return await self.user_service.get_current_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\user_service.py", line 15, in get_current_user
    user = await self.user_repo.get_by_context_user()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 33, in get_by_context_user
    await self.db.table("Users")
    ...<3 lines>...
    .execute()
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 115, in execute
    raise APIError(
    ...<6 lines>...
    )
postgrest.exceptions.APIError: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-26 20:17:12,162 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 20:17:25,181 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 20:18:33,500 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 20:18:42,768 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 20:18:52,185 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 20:24:12,891 | WARNING | src.domain.services.auth_service | khaer@gmail.com login failed: User not found
2025-12-26 20:24:13,036 | ERROR | src.app.middlewares.error_handler | Custom Error: EMAIL_NOT_FOUND
2025-12-26 20:24:35,612 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 20:30:42,323 | ERROR | src.app.middlewares.error_handler | Unexpected error: 'role'
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 420, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 667, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\core\utils\security.py", line 65, in jwt_required
    current_user_role.set(payload["role"])
                          ~~~~~~~^^^^^^^^
KeyError: 'role'
2025-12-26 20:32:06,389 | ERROR | src.app.middlewares.error_handler | Unexpected error: 'role'
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 420, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 667, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\core\utils\security.py", line 65, in jwt_required
    current_user_role.set(payload["role"])
                          ~~~~~~~^^^^^^^^
KeyError: 'role'
2025-12-26 20:33:01,537 | ERROR | src.app.middlewares.error_handler | Unexpected error: 'role'
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 420, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 667, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\core\utils\security.py", line 65, in jwt_required
    current_user_role.set(payload["role"])
                          ~~~~~~~^^^^^^^^
KeyError: 'role'
2025-12-26 20:34:01,865 | ERROR | src.app.middlewares.error_handler | Unexpected error: 'role'
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 420, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 667, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\core\utils\security.py", line 65, in jwt_required
    current_user_role.set(payload["role"])
                          ~~~~~~~^^^^^^^^
KeyError: 'role'
2025-12-26 20:36:08,218 | ERROR | src.app.middlewares.error_handler | Unexpected error: 'role'
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 420, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 667, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\core\utils\security.py", line 65, in jwt_required
    current_user_role.set(payload["role"])
                          ~~~~~~~^^^^^^^^
KeyError: 'role'
2025-12-26 20:38:33,444 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-26 20:41:30,274 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-27 10:16:54,267 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-27 10:17:17,829 | ERROR | src.app.middlewares.error_handler | Unexpected error: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\user_route.py", line 19, in get_me
    return success_response(result_data.model_dump())
  File "D:\PROJECT_WA\src\core\utils\response.py", line 52, in success_response
    return JSONResponse(
        status_code=status_code,
        content=payload,
    )
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\responses.py", line 189, in __init__
    super().__init__(content, status_code, headers, media_type, background)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\responses.py", line 46, in __init__
    self.body = self.render(content)
                ~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\responses.py", line 192, in render
    return json.dumps(
           ~~~~~~~~~~^
        content,
        ^^^^^^^^
    ...<3 lines>...
        separators=(",", ":"),
        ^^^^^^^^^^^^^^^^^^^^^^
    ).encode("utf-8")
    ^
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-12-27 10:23:46,759 | ERROR | src.app.middlewares.error_handler | Unexpected error: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\user_route.py", line 19, in get_me
    return success_response(result_data.model_dump())
  File "D:\PROJECT_WA\src\core\utils\response.py", line 52, in success_response
    return JSONResponse(
        status_code=status_code,
        content=payload,
    )
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\responses.py", line 189, in __init__
    super().__init__(content, status_code, headers, media_type, background)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\responses.py", line 46, in __init__
    self.body = self.render(content)
                ~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\responses.py", line 192, in render
    return json.dumps(
           ~~~~~~~~~~^
        content,
        ^^^^^^^^
    ...<3 lines>...
        separators=(",", ":"),
        ^^^^^^^^^^^^^^^^^^^^^^
    ).encode("utf-8")
    ^
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-12-27 10:23:57,936 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-27 10:24:12,434 | WARNING | src.core.utils.security | Invalid token: Subject must be a string
2025-12-27 10:24:12,443 | ERROR | src.app.middlewares.error_handler | Custom Error: INVALID_TOKEN
2025-12-27 10:26:47,495 | WARNING | src.core.utils.security | Invalid token: Subject must be a string
2025-12-27 10:26:47,574 | ERROR | src.app.middlewares.error_handler | Custom Error: INVALID_TOKEN
2025-12-27 10:39:29,219 | WARNING | src.core.utils.security | Invalid token: Subject must be a string
2025-12-27 10:39:29,322 | ERROR | src.app.controllers.auth_controller | 401: {'code': 'INVALID_TOKEN', 'message': 'invalid jwt token'}
2025-12-27 10:39:29,359 | ERROR | src.app.middlewares.error_handler | Custom Error: INVALID_TOKEN
2025-12-27 10:41:08,834 | WARNING | src.app.controllers.auth_controller | 401: {'code': 'UNAUTHORIZED', 'message': 'Missing refresh token'}
2025-12-27 10:41:08,835 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-27 10:41:27,522 | ERROR | src.app.controllers.auth_controller | 'id'
2025-12-27 10:41:27,526 | ERROR | src.app.middlewares.error_handler | Unexpected error: 'id'
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\auth_route.py", line 43, in refresh
    result = await controller.refresh_token_handler(request, response)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 59, in refresh_token_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 52, in refresh_token_handler
    res = await self.auth_service.refresh_access_token(request, response)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\auth_service.py", line 141, in refresh_access_token
    print(f"user id: {payload['id']}")
                      ~~~~~~~^^^^^^
KeyError: 'id'
2025-12-27 10:43:22,166 | ERROR | src.app.controllers.auth_controller | 'id'
2025-12-27 10:43:23,016 | ERROR | src.app.middlewares.error_handler | Unexpected error: 'id'
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\auth_route.py", line 43, in refresh
    result = await controller.refresh_token_handler(request, response)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 59, in refresh_token_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 52, in refresh_token_handler
    res = await self.auth_service.refresh_access_token(request, response)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\auth_service.py", line 143, in refresh_access_token
    user = await self.user_repo.get_user_by_id(payload["id"])
                                               ~~~~~~~^^^^^^
KeyError: 'id'
2025-12-27 10:46:25,762 | ERROR | src.app.middlewares.error_handler | Unexpected error: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\user_route.py", line 19, in get_me
    return success_response(result_data.model_dump())
  File "D:\PROJECT_WA\src\core\utils\response.py", line 52, in success_response
    return JSONResponse(
        status_code=status_code,
        content=payload,
    )
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\responses.py", line 189, in __init__
    super().__init__(content, status_code, headers, media_type, background)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\responses.py", line 46, in __init__
    self.body = self.render(content)
                ~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\responses.py", line 192, in render
    return json.dumps(
           ~~~~~~~~~~^
        content,
        ^^^^^^^^
    ...<3 lines>...
        separators=(",", ":"),
        ^^^^^^^^^^^^^^^^^^^^^^
    ).encode("utf-8")
    ^
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-12-27 11:15:45,680 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-27 11:16:17,830 | ERROR | src.app.middlewares.error_handler | Custom Error: FORBIDDEN
2025-12-27 11:17:12,022 | ERROR | src.app.middlewares.error_handler | Custom Error: FORBIDDEN
2025-12-27 11:18:31,464 | ERROR | src.app.middlewares.error_handler | Custom Error: FORBIDDEN
2025-12-27 11:23:34,126 | ERROR | src.app.middlewares.error_handler | Custom Error: FORBIDDEN
2025-12-27 20:57:56,344 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-27 20:59:03,022 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'model_attributes_type', 'loc': ('body',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': b'{\r\n    "email": "khaerul@gmail.com",\r\n    "password": "12345678"\r\n}'}]
2025-12-27 20:59:23,126 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'model_attributes_type', 'loc': ('body',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': b'{\r\n    "email": "khaerul@gmail.com",\r\n    "password": "12345678"\r\n}'}]
2025-12-27 20:59:43,107 | WARNING | src.domain.services.auth_service | khaerul@gmail.com login failed: Unexpected error while authenticate the user: 'User' object has no attribute 'password'
2025-12-27 20:59:43,108 | ERROR | src.app.middlewares.error_handler | Unexpected error: 'User' object has no attribute 'password'
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\auth_route.py", line 32, in login
    result = await controller.login_handler(response, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 48, in login_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 42, in login_handler
    result = await self.auth_service.login_handler(response, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\auth_service.py", line 92, in login_handler
    self.raise_error_usecase(auth_user)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\base.py", line 12, in raise_error_usecase
    raise exception
  File "D:\PROJECT_WA\src\domain\usecases\auth\authenticate_user.py", line 54, in execute
    input_data.password, get_user.password
                         ^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\pydantic\main.py", line 1026, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'User' object has no attribute 'password'
2025-12-27 21:01:50,839 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'phone_number'), 'msg': 'Field required', 'input': {'name': 'bakso channel'}}]
2025-12-27 21:02:21,851 | ERROR | src.app.controllers.business_controller | 
2025-12-27 21:02:21,854 | ERROR | src.app.middlewares.error_handler | Unexpected error: 
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_async\connection.py", line 156, in _connect
    stream = await stream.start_tls(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 67, in start_tls
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_route.py", line 22, in add_business
    result = await controller.add_new_business_handler(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\business_controller.py", line 23, in add_new_business_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_controller.py", line 16, in add_new_business_handler
    result = await self.business_service.add_new_business(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\business_service.py", line 30, in add_new_business
    self.raise_error_usecase(result)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\base.py", line 12, in raise_error_usecase
    raise exception
  File "D:\PROJECT_WA\src\domain\usecases\business\add_business.py", line 28, in execute
    result = await self.business_respository.add_business(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        input_data.user_id, input_data.business_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\repositories\business_repository.py", line 24, in add_business
    await self.db.table("Businesses").insert(payload).execute()
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 47, in execute
    r = await self.request.send()
        ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError
2025-12-27 21:05:14,188 | ERROR | src.app.controllers.business_controller | {'message': 'null value in column "phone_number" of relation "Businesses" violates not-null constraint', 'code': '23502', 'hint': None, 'details': 'Failing row contains (3, 4, mie ayam, null, null, 2025-12-27 14:03:32.933227+00, 2025-12-27 14:03:32.933227+00).'}
2025-12-27 21:05:14,188 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'null value in column "phone_number" of relation "Businesses" violates not-null constraint', 'code': '23502', 'hint': None, 'details': 'Failing row contains (3, 4, mie ayam, null, null, 2025-12-27 14:03:32.933227+00, 2025-12-27 14:03:32.933227+00).'}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_route.py", line 37, in update_business
    result = await controller.update_business_handler(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\business_controller.py", line 31, in update_business_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_controller.py", line 27, in update_business_handler
    result = await self.business_service.update_business(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\business_service.py", line 43, in update_business
    response = await self.business_repo.update_business(user_id, payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\business_repository.py", line 39, in update_business
    await self.db.table("Businesses")
    ...<2 lines>...
    .execute()
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 53, in execute
    raise APIError(dict(json_obj))
postgrest.exceptions.APIError: {'message': 'null value in column "phone_number" of relation "Businesses" violates not-null constraint', 'code': '23502', 'hint': None, 'details': 'Failing row contains (3, 4, mie ayam, null, null, 2025-12-27 14:03:32.933227+00, 2025-12-27 14:03:32.933227+00).'}
2025-12-27 21:33:46,058 | ERROR | src.app.middlewares.error_handler | Unexpected error: 'BusinessController' object has no attribute 'get_current_business_handler'
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_route.py", line 21, in get_current_business
    result = await controller.get_current_business_handler()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'BusinessController' object has no attribute 'get_current_business_handler'. Did you mean: 'add_new_business_handler'?
2025-12-29 19:38:08,753 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body',), 'msg': 'Field required', 'input': None}]
2025-12-29 19:38:50,080 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'category_description'), 'msg': 'Field required', 'input': {'category': 'makanan'}}, {'type': 'missing', 'loc': ('body', 'content'), 'msg': 'Field required', 'input': {'category': 'makanan'}}]
2025-12-29 19:40:14,575 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-29 19:40:14,579 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 25, in add_business_knowladge
    result = await controller.add_business_knowladge_handler(business_id, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 24, in add_business_knowladge_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 18, in add_business_knowladge_handler
    result = await self.business_knowladge_service.add_business_knowladge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id, payload
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 21, in add_business_knowladge
    business = await self.business_repo.get_business_by_id(business_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\business_repository.py", line 17, in get_business_by_id
    result = await self.db.table("Businesses").select("*").maybe_single().execute()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 115, in execute
    raise APIError(
    ...<6 lines>...
    )
postgrest.exceptions.APIError: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-29 19:40:57,573 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-29 19:40:57,578 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 25, in add_business_knowladge
    result = await controller.add_business_knowladge_handler(business_id, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 24, in add_business_knowladge_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 18, in add_business_knowladge_handler
    result = await self.business_knowladge_service.add_business_knowladge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id, payload
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 21, in add_business_knowladge
    business = await self.business_repo.get_business_by_id(business_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\business_repository.py", line 17, in get_business_by_id
    result = await self.db.table("Businesses").select("*").maybe_single().execute()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 115, in execute
    raise APIError(
    ...<6 lines>...
    )
postgrest.exceptions.APIError: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-29 19:43:01,491 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-29 19:43:01,496 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 25, in add_business_knowladge
    result = await controller.add_business_knowladge_handler(business_id, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 24, in add_business_knowladge_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 18, in add_business_knowladge_handler
    result = await self.business_knowladge_service.add_business_knowladge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id, payload
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 21, in add_business_knowladge
    business = await self.business_repo.get_business_by_id(business_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\business_repository.py", line 17, in get_business_by_id
    result = await self.db.table("Businesses").select("*").maybe_single().execute()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 115, in execute
    raise APIError(
    ...<6 lines>...
    )
postgrest.exceptions.APIError: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-29 19:46:40,010 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-29 19:46:40,011 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 25, in add_business_knowladge
    result = await controller.add_business_knowladge_handler(business_id, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 25, in add_business_knowladge_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 18, in add_business_knowladge_handler
    result = await self.business_knowladge_service.add_business_knowladge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id, payload
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 21, in add_business_knowladge
    business = await self.business_repo.get_business_by_id(business_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\business_repository.py", line 17, in get_business_by_id
    result = await self.db.table("Businesses").select("*").maybe_single().execute()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 115, in execute
    raise APIError(
    ...<6 lines>...
    )
postgrest.exceptions.APIError: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-29 19:47:58,009 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-29 19:47:58,047 | ERROR | src.app.middlewares.error_handler | Unexpected error: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 25, in add_business_knowladge
    result = await controller.add_business_knowladge_handler(business_id, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 25, in add_business_knowladge_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 18, in add_business_knowladge_handler
    result = await self.business_knowladge_service.add_business_knowladge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id, payload
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 21, in add_business_knowladge
    business = await self.business_repo.get_business_by_id(business_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\business_repository.py", line 18, in get_business_by_id
    await self.db.table("Businesses")
    ...<3 lines>...
    .execute()
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 115, in execute
    raise APIError(
    ...<6 lines>...
    )
postgrest.exceptions.APIError: {'message': 'Missing response', 'code': '204', 'hint': 'Please check traceback of the code', 'details': "Postgrest couldn't retrieve response, please check traceback of the code. Please create an issue in `supabase-community/postgrest-py` if needed."}
2025-12-29 19:49:29,078 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: 'BusinessKnowladgeService' object has no attribute 'logger'
2025-12-29 19:49:29,081 | ERROR | src.app.middlewares.error_handler | Unexpected error: 'BusinessKnowladgeService' object has no attribute 'logger'
Traceback (most recent call last):
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 23, in add_business_knowladge
    raise BusinessNotFound(f"Business not found with id {business_id}")
src.core.exceptions.business_exception.BusinessNotFound: 404: {'code': 'BUSINESS_NOT_FOUND', 'message': 'Business not found with id 4'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 25, in add_business_knowladge
    result = await controller.add_business_knowladge_handler(business_id, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 24, in add_business_knowladge_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 18, in add_business_knowladge_handler
    result = await self.business_knowladge_service.add_business_knowladge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id, payload
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 31, in add_business_knowladge
    self.logger.warning(str(e))
    ^^^^^^^^^^^
AttributeError: 'BusinessKnowladgeService' object has no attribute 'logger'
2025-12-29 19:50:47,870 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-29 19:51:20,196 | WARNING | src.domain.services.business_knowladge_service | 404: {'code': 'BUSINESS_NOT_FOUND', 'message': 'Business not found with id 4'}
2025-12-29 19:51:20,203 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: 404: {'code': 'BUSINESS_NOT_FOUND', 'message': 'Business not found with id 4'}
2025-12-29 19:51:20,205 | ERROR | src.app.middlewares.error_handler | Custom Error: BUSINESS_NOT_FOUND
2025-12-29 19:51:32,580 | ERROR | src.domain.repositories.business_knowladges_repository | Error while add business knowladge: 1 validation error for BusinessKnowladge
description
  Field required [type=missing, input_value={'id': 1, 'business_id': ...T12:51:30.889964+00:00'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-29 19:51:32,586 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: 1 validation error for BusinessKnowladge
description
  Field required [type=missing, input_value={'id': 1, 'business_id': ...T12:51:30.889964+00:00'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-29 19:51:32,587 | ERROR | src.app.middlewares.error_handler | Unexpected error: 1 validation error for BusinessKnowladge
description
  Field required [type=missing, input_value={'id': 1, 'business_id': ...T12:51:30.889964+00:00'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 25, in add_business_knowladge
    result = await controller.add_business_knowladge_handler(business_id, payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 24, in add_business_knowladge_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 18, in add_business_knowladge_handler
    result = await self.business_knowladge_service.add_business_knowladge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id, payload
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 27, in add_business_knowladge
    response_data = await self.business_knowladge_repo.add_business_knowladge(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id, payload
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\repositories\business_knowladges_repository.py", line 29, in add_business_knowladge
    raise e
  File "D:\PROJECT_WA\src\domain\repositories\business_knowladges_repository.py", line 25, in add_business_knowladge
    return BusinessKnowladge.model_validate(result.data[0])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\pydantic\main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj,
        ^^^^
    ...<5 lines>...
        by_name=by_name,
        ^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 1 validation error for BusinessKnowladge
description
  Field required [type=missing, input_value={'id': 1, 'business_id': ...T12:51:30.889964+00:00'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-29 21:13:46,833 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-29 21:14:05,733 | WARNING | src.domain.services.business_knowladge_service | Don't have permission business id 5: 401: {'code': 'DONT_HAVE_BUSINESS_PERMISSION', 'message': "You don't have permission for this business"}
2025-12-29 21:14:05,734 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: 401: {'code': 'DONT_HAVE_BUSINESS_PERMISSION', 'message': "You don't have permission for this business"}
2025-12-29 21:14:05,735 | ERROR | src.app.middlewares.error_handler | Custom Error: DONT_HAVE_BUSINESS_PERMISSION
2025-12-29 21:14:54,432 | WARNING | src.domain.services.business_knowladge_service | Don't have permission business id 5: 401: {'code': 'DONT_HAVE_BUSINESS_PERMISSION_ACCESS', 'message': "You don't have permission access for this business"}
2025-12-29 21:14:54,435 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: 401: {'code': 'DONT_HAVE_BUSINESS_PERMISSION_ACCESS', 'message': "You don't have permission access for this business"}
2025-12-29 21:14:54,437 | ERROR | src.app.middlewares.error_handler | Custom Error: DONT_HAVE_BUSINESS_PERMISSION_ACCESS
2025-12-29 21:20:53,225 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: [Errno 11001] getaddrinfo failed
2025-12-29 21:20:53,230 | ERROR | src.app.middlewares.error_handler | Unexpected error: [Errno 11001] getaddrinfo failed
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 24, in get_all_business_knowladge_by_business_id
    result = await controller.get_all_business_knowladge_by_business_id_handler(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id
        ^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 27, in get_all_business_knowladge_by_business_id_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 16, in get_all_business_knowladge_by_business_id_handler
    business_knowladges = await self.business_knowladge_service.get_all_business_knowladge_by_business_id(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id
        ^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 29, in get_all_business_knowladge_by_business_id
    if business is None:
    
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 16, in get_user_by_business_id
    await self.db.table("Businesses")
    ...<4 lines>...
    .execute()
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 110, in execute
    r = await AsyncSingleRequestBuilder(self.request).execute()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\postgrest\_async\request_builder.py", line 74, in execute
    r = await self.request.send()
        ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\starb\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-12-29 21:21:15,353 | WARNING | src.domain.services.business_knowladge_service | 404: {'code': 'BUSINESS_NOT_FOUND', 'message': 'Business not found with id 5'}
2025-12-29 21:21:15,356 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: 404: {'code': 'BUSINESS_NOT_FOUND', 'message': 'Business not found with id 5'}
2025-12-29 21:21:15,357 | ERROR | src.app.middlewares.error_handler | Custom Error: BUSINESS_NOT_FOUND
2025-12-29 21:21:22,653 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: 5 validation errors for User
id
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
name
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
email
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
password
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-29 21:21:22,659 | ERROR | src.app.middlewares.error_handler | Unexpected error: 5 validation errors for User
id
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
name
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
email
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
password
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 24, in get_all_business_knowladge_by_business_id
    result = await controller.get_all_business_knowladge_by_business_id_handler(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id
        ^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 27, in get_all_business_knowladge_by_business_id_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 16, in get_all_business_knowladge_by_business_id_handler
    business_knowladges = await self.business_knowladge_service.get_all_business_knowladge_by_business_id(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id
        ^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 35, in get_all_business_knowladge_by_business_id
    user_permission = await self.user_repo.get_user_by_business_id(business_id)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 27, in get_user_by_business_id
    return User.model_validate(result.data)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\pydantic\main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj,
        ^^^^
    ...<5 lines>...
        by_name=by_name,
        ^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 5 validation errors for User
id
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
name
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
email
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
password
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-29 21:22:39,544 | ERROR | src.app.controllers.business_knowladge_controller | Unexpected error: 5 validation errors for User
id
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
name
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
email
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
password
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-29 21:22:39,546 | ERROR | src.app.middlewares.error_handler | Unexpected error: 5 validation errors for User
id
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
name
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
email
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
password
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 24, in get_all_business_knowladge_by_business_id
    result = await controller.get_all_business_knowladge_by_business_id_handler(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id
        ^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 27, in get_all_business_knowladge_by_business_id_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 16, in get_all_business_knowladge_by_business_id_handler
    business_knowladges = await self.business_knowladge_service.get_all_business_knowladge_by_business_id(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_id
        ^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 35, in get_all_business_knowladge_by_business_id
    user_permission = await self.user_repo.get_user_by_business_id(business_id)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 29, in get_user_by_business_id
    return User.model_validate(result.data)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\pydantic\main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj,
        ^^^^
    ...<5 lines>...
        by_name=by_name,
        ^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 5 validation errors for User
id
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
name
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
email
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
password
  Field required [type=missing, input_value={'Users': {'id': 4, 'name...02:15:04.473084+00:00'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-30 09:57:04,857 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-30 19:39:11,641 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-30 19:47:09,414 | ERROR | src.app.controllers.business_controller | 'BusinessService' object has no attribute 'logger'
2025-12-30 19:47:09,423 | ERROR | src.app.middlewares.error_handler | Unexpected error: 'BusinessService' object has no attribute 'logger'
Traceback (most recent call last):
  File "D:\PROJECT_WA\src\domain\services\business_service.py", line 40, in add_new_business
    raise BusinessIsAlreadyExist(
        "Cannot add new business, because business is already exist"
    )
src.core.exceptions.business_exception.BusinessIsAlreadyExist: 400: {'code': 'BUSINESS_IS_ALREAY_EXIST', 'message': 'Cannot add new business, because business is already exist'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_route.py", line 32, in add_business
    result = await controller.add_new_business_handler(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\business_controller.py", line 35, in add_new_business_handler
    raise e
  File "D:\PROJECT_WA\src\app\controllers\business_controller.py", line 28, in add_new_business_handler
    result = await self.business_service.add_new_business(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\business_service.py", line 61, in add_new_business
    self.logger.warning(str(e))
    ^^^^^^^^^^^
AttributeError: 'BusinessService' object has no attribute 'logger'
2025-12-30 19:48:10,626 | WARNING | src.domain.services.business_service | 400: {'code': 'BUSINESS_IS_ALREAY_EXIST', 'message': 'Cannot add new business, because business is already exist'}
2025-12-30 19:48:10,629 | ERROR | src.app.controllers.business_controller | 400: {'code': 'BUSINESS_IS_ALREAY_EXIST', 'message': 'Cannot add new business, because business is already exist'}
2025-12-30 19:48:10,644 | ERROR | src.app.middlewares.error_handler | Custom Error: BUSINESS_IS_ALREAY_EXIST
2025-12-30 19:50:48,304 | ERROR | src.app.controllers.business_controller | 400: {'code': 'BUSINESS_IS_ALREAY_EXIST', 'message': 'Cannot add new business, because business is already exist'}
2025-12-30 19:50:48,310 | ERROR | src.app.middlewares.error_handler | Custom Error: BUSINESS_IS_ALREAY_EXIST
2025-12-30 19:52:53,312 | WARNING | src.app.controllers.business_controller | 400: {'code': 'BUSINESS_IS_ALREAY_EXIST', 'message': 'Cannot add new business, because business is already exist'}
2025-12-30 19:52:53,314 | ERROR | src.app.middlewares.error_handler | Custom Error: BUSINESS_IS_ALREAY_EXIST
2025-12-30 21:22:54,514 | ERROR | src.app.middlewares.error_handler | Custom Error: UNAUTHORIZED
2025-12-30 21:24:39,415 | ERROR | src.domain.repositories.business_knowladges_repository | Error while update business knowladge: list index out of range
2025-12-30 21:24:39,421 | ERROR | src.app.middlewares.error_handler | Unexpected error: list index out of range
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 53, in update_business_knowladge
    result = await controller.update_business_knowladge_handler(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_knowladge_id, payload
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 46, in update_business_knowladge_handler
    result = await self.business_knowladge_service.update_business_knowladge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_knowladge_id, payload
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 86, in update_business_knowladge
    await self.business_knowladge_repo.update_business_knowladge_by_id(
        business_knowladge_id, payload
    )
  File "D:\PROJECT_WA\src\domain\repositories\business_knowladges_repository.py", line 72, in update_business_knowladge_by_id
    raise e
  File "D:\PROJECT_WA\src\domain\repositories\business_knowladges_repository.py", line 69, in update_business_knowladge_by_id
    return BusinessKnowladge.model_validate(result.data[0])
                                            ~~~~~~~~~~~^^^
IndexError: list index out of range
2025-12-30 21:27:21,104 | ERROR | src.domain.repositories.business_knowladges_repository | Error while update business knowladge: list index out of range
2025-12-30 21:27:21,107 | ERROR | src.app.middlewares.error_handler | Unexpected error: list index out of range
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\business_knowladge_route.py", line 53, in update_business_knowladge
    result = await controller.update_business_knowladge_handler(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_knowladge_id, payload
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\app\controllers\business_knowladge_controller.py", line 46, in update_business_knowladge_handler
    result = await self.business_knowladge_service.update_business_knowladge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        business_knowladge_id, payload
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\src\domain\services\business_knowladge_service.py", line 86, in update_business_knowladge
    await self.business_knowladge_repo.update_business_knowladge_by_id(
        business_knowladge_id, payload
    )
  File "D:\PROJECT_WA\src\domain\repositories\business_knowladges_repository.py", line 73, in update_business_knowladge_by_id
    raise e
  File "D:\PROJECT_WA\src\domain\repositories\business_knowladges_repository.py", line 70, in update_business_knowladge_by_id
    return BusinessKnowladge.model_validate(result.data[0])
                                            ~~~~~~~~~~~^^^
IndexError: list index out of range
2025-12-30 21:29:37,931 | ERROR | src.domain.repositories.business_knowladges_repository | 404: {'code': 'BUSINESS_KNOWLADGE_NOT_FOUND', 'message': 'Business knowladge not found'}
2025-12-30 21:29:38,122 | ERROR | src.app.middlewares.error_handler | Custom Error: BUSINESS_KNOWLADGE_NOT_FOUND
