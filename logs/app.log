2025-12-08 10:33:31,361 | ERROR | src.app.middlewares.error_handler | Unexpected error: InternalServerError() takes no keyword arguments
Traceback (most recent call last):
  File "D:\PROJECT_WA\src\app\middlewares\error_handler.py", line 15, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\main.py", line 20, in root
    raise InternalServerError()
          ~~~~~~~~~~~~~~~~~~~^^
  File "D:\PROJECT_WA\src\core\exceptions\internal_exception.py", line 8, in __init__
    super().__init__(
    ~~~~~~~~~~~~~~~~^
        status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        },
        ^^
    )
    ^
  File "D:\PROJECT_WA\src\core\exceptions\base.py", line 32, in __init__
    super().__init__(status_code=self.status_code, detail=self.detail)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: InternalServerError() takes no keyword arguments
2025-12-08 10:47:31,045 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {'nama': 'str'}}]
2025-12-08 10:48:32,692 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {'nama': 'str'}}, {'type': 'missing', 'loc': ('body', 'umur'), 'msg': 'Field required', 'input': {'nama': 'str'}}]
2025-12-08 10:49:14,271 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'name'), 'msg': 'Field required', 'input': {'nama': 'str'}}, {'type': 'missing', 'loc': ('body', 'umur'), 'msg': 'Field required', 'input': {'nama': 'str'}}]
2025-12-08 10:49:32,284 | ERROR | src.app.middlewares.error_handler | Unexpected error: InternalServerError() takes no keyword arguments
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\main.py", line 30, in root
    return InternalServerError()
  File "D:\PROJECT_WA\src\core\exceptions\internal_exception.py", line 8, in __init__
    super().__init__(
    ~~~~~~~~~~~~~~~~^
        status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        },
        ^^
    )
    ^
  File "D:\PROJECT_WA\src\core\exceptions\base.py", line 31, in __init__
    super().__init__(status_code=self.status_code, detail=self.detail)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: InternalServerError() takes no keyword arguments
2025-12-08 10:50:57,012 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'umur'), 'msg': 'Field required', 'input': {'name': 'str', 'umur3': 1}}]
2025-12-08 10:56:18,334 | ERROR | src.app.middlewares.error_handler | Custom Error: INTERNAL_SERVER_ERROR
2025-12-08 10:58:22,535 | ERROR | src.app.middlewares.error_handler | Unexpected error: 
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\main.py", line 30, in root
    raise Exception()
Exception
2025-12-08 20:30:35,450 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'object'), 'msg': 'Field required', 'input': {'name': 'str', 'umur': 1}}, {'type': 'missing', 'loc': ('body', 'entry'), 'msg': 'Field required', 'input': {'name': 'str', 'umur': 1}}]
2025-12-08 20:35:08,594 | INFO | src.infrastructure.meta.wa_manager | Webhook verified
2025-12-08 20:36:40,098 | INFO | src.infrastructure.meta.wa_manager | Webhook verified
2025-12-08 20:38:08,775 | INFO | src.infrastructure.meta.wa_manager | Webhook verified
2025-12-08 20:39:03,417 | INFO | src.infrastructure.meta.wa_manager | Webhook verified
2025-12-08 20:39:39,769 | INFO | src.infrastructure.meta.wa_manager | Send text message is successfully to number 6285747515372
2025-12-08 20:39:41,360 | ERROR | src.app.controllers.whatsapp_controller | Unexpected error while send message: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:41,464 | ERROR | src.app.middlewares.error_handler | Unexpected error: cannot access local variable 'from_number' where it is not associated with a value
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\src\app\routes\whatsapp_route.py", line 28, in receive_webhook
    controller.send_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 21, in send_message
    raise e
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 16, in send_message
    self.whatsapp_service.send_text_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 40, in send_text_message
    from_number, message_type, text = self._get_detail_message(payload)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 37, in _get_detail_message
    return from_number, message_type, incoming_text
           ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:43,732 | ERROR | src.app.controllers.whatsapp_controller | Unexpected error while send message: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:43,738 | ERROR | src.app.middlewares.error_handler | Unexpected error: cannot access local variable 'from_number' where it is not associated with a value
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\src\app\routes\whatsapp_route.py", line 28, in receive_webhook
    controller.send_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 21, in send_message
    raise e
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 16, in send_message
    self.whatsapp_service.send_text_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 40, in send_text_message
    from_number, message_type, text = self._get_detail_message(payload)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 37, in _get_detail_message
    return from_number, message_type, incoming_text
           ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:44,931 | ERROR | src.app.controllers.whatsapp_controller | Unexpected error while send message: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:44,932 | ERROR | src.app.middlewares.error_handler | Unexpected error: cannot access local variable 'from_number' where it is not associated with a value
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\src\app\routes\whatsapp_route.py", line 28, in receive_webhook
    controller.send_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 21, in send_message
    raise e
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 16, in send_message
    self.whatsapp_service.send_text_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 40, in send_text_message
    from_number, message_type, text = self._get_detail_message(payload)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 37, in _get_detail_message
    return from_number, message_type, incoming_text
           ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:47,482 | ERROR | src.app.controllers.whatsapp_controller | Unexpected error while send message: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:39:47,499 | ERROR | src.app.middlewares.error_handler | Unexpected error: cannot access local variable 'from_number' where it is not associated with a value
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\src\app\routes\whatsapp_route.py", line 28, in receive_webhook
    controller.send_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 21, in send_message
    raise e
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 16, in send_message
    self.whatsapp_service.send_text_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 40, in send_text_message
    from_number, message_type, text = self._get_detail_message(payload)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 37, in _get_detail_message
    return from_number, message_type, incoming_text
           ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:40:07,174 | ERROR | src.app.controllers.whatsapp_controller | Unexpected error while send message: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:40:07,181 | ERROR | src.app.middlewares.error_handler | Unexpected error: cannot access local variable 'from_number' where it is not associated with a value
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 318, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "D:\PROJECT_WA\src\app\routes\whatsapp_route.py", line 28, in receive_webhook
    controller.send_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 21, in send_message
    raise e
  File "D:\PROJECT_WA\src\app\controllers\whatsapp_controller.py", line 16, in send_message
    self.whatsapp_service.send_text_message(payload)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 40, in send_text_message
    from_number, message_type, text = self._get_detail_message(payload)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\whatsapp_service.py", line 37, in _get_detail_message
    return from_number, message_type, incoming_text
           ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'from_number' where it is not associated with a value
2025-12-08 20:44:40,415 | INFO | src.infrastructure.meta.wa_manager | Send text message is successfully to number 6285747515372
2025-12-08 20:46:15,235 | INFO | src.infrastructure.meta.wa_manager | Send text message is successfully to number 6285747515372
2025-12-08 20:50:35,954 | INFO | src.infrastructure.meta.wa_manager | Send text message is successfully to number 6285747515372
2025-12-15 08:53:13,922 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'missing', 'loc': ('body', 'email'), 'msg': 'Field required', 'input': {'name': 'str', 'umur': 1}}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': {'name': 'str', 'umur': 1}}]
2025-12-15 08:54:39,830 | WARNING | src.domain.services.auth_service | Register user failed: code=None error=Password must be at least 6 characters long
2025-12-15 08:54:39,832 | ERROR | src.app.middlewares.error_handler | Custom Error: UNKNOWN
2025-12-15 08:58:48,330 | WARNING | src.domain.services.auth_service | Register user failed: code=None error=Password must be at least 6 characters long
2025-12-15 08:58:48,334 | ERROR | src.app.middlewares.error_handler | Custom Error: PASSWORD_TOO_WEAK
2025-12-15 08:59:18,290 | WARNING | src.app.middlewares.error_handler | Validation Error: [{'type': 'value_error', 'loc': ('body', 'email'), 'msg': 'value is not a valid email address: An email address must have an @-sign.', 'input': 'khaerulgmail.com', 'ctx': {'reason': 'An email address must have an @-sign.'}}]
2025-12-15 08:59:49,419 | WARNING | src.domain.services.auth_service | Register user failed: code=None error=Unexpected error while register new user: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
2025-12-15 08:59:49,421 | ERROR | src.app.controllers.auth_controller | Unexpected error while register new user: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
2025-12-15 08:59:49,422 | ERROR | src.app.middlewares.error_handler | Unexpected error: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\auth_route.py", line 19, in register
    result = await controller.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 42, in register_new_user
    raise e
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 25, in register_new_user
    result = await self.auth_service.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\auth_service.py", line 42, in register_new_user
    self.raise_error_usecase(reg_user)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\base.py", line 12, in raise_error_usecase
    raise exception
  File "D:\PROJECT_WA\src\domain\usecases\auth\register_new_user.py", line 70, in execute
    hashed_password = self.password_hashed.hash_password(password)
  File "D:\PROJECT_WA\src\core\utils\hash.py", line 11, in hash_password
    return self.pwd_context.hash(password)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\context.py", line 2258, in hash
    return record.hash(secret, **kwds)
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 779, in hash
    self.checksum = self._calc_checksum(secret)
                    ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 591, in _calc_checksum
    self._stub_requires_backend()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2254, in _stub_requires_backend
    cls.set_backend()
    ~~~~~~~~~~~~~~~^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2156, in set_backend
    return owner.set_backend(name, dryrun=dryrun)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2163, in set_backend
    return cls.set_backend(name, dryrun=dryrun)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2188, in set_backend
    cls._set_backend(name, dryrun)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2311, in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 2224, in _set_backend
    ok = loader(**kwds)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 626, in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 421, in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
       ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 380, in detect_wrap_bug
    if verify(secret, bug_hash):
       ~~~~~~^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\utils\handlers.py", line 792, in verify
    return consteq(self._calc_checksum(secret), chk)
                   ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 655, in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
2025-12-15 09:15:05,403 | WARNING | src.domain.services.auth_service | Register user failed: code=None error=Unexpected error while register new user: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-15 09:15:05,496 | ERROR | src.app.controllers.auth_controller | Unexpected error while register new user: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-15 09:15:05,903 | ERROR | src.app.middlewares.error_handler | Unexpected error: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\auth_route.py", line 19, in register
    result = await controller.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 42, in register_new_user
    raise e
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 25, in register_new_user
    result = await self.auth_service.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\auth_service.py", line 42, in register_new_user
    self.raise_error_usecase(reg_user)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\base.py", line 12, in raise_error_usecase
    raise exception
  File "D:\PROJECT_WA\src\domain\usecases\auth\register_new_user.py", line 73, in execute
    await self.user_repository.create_user(
        name=name, email=email, hashed_password=hashed_password
    )
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 59, in create_user
    return User.model_validate(payload)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\pydantic\main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj,
        ^^^^
    ...<5 lines>...
        by_name=by_name,
        ^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...BDivXG4v/KQgaR03UhoZdu'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-15 09:18:24,122 | WARNING | src.domain.services.auth_service | Register user failed: code=EMAIL_IN_USE error=Email is already in use
2025-12-15 09:18:24,230 | ERROR | src.app.middlewares.error_handler | Custom Error: EMAIL_ALREADY_EXISTS
2025-12-15 09:18:39,981 | WARNING | src.domain.services.auth_service | Register user failed: code=None error=Unexpected error while register new user: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-15 09:18:39,987 | ERROR | src.app.controllers.auth_controller | Unexpected error while register new user: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-12-15 09:18:40,002 | ERROR | src.app.middlewares.error_handler | Unexpected error: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\PROJECT_WA\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 106, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 430, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\fastapi\routing.py", line 316, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\routes\auth_route.py", line 19, in register
    result = await controller.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 42, in register_new_user
    raise e
  File "D:\PROJECT_WA\src\app\controllers\auth_controller.py", line 25, in register_new_user
    result = await self.auth_service.register_new_user(payload)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\auth_service.py", line 42, in register_new_user
    self.raise_error_usecase(reg_user)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "D:\PROJECT_WA\src\domain\services\base.py", line 12, in raise_error_usecase
    raise exception
  File "D:\PROJECT_WA\src\domain\usecases\auth\register_new_user.py", line 73, in execute
    await self.user_repository.create_user(
        name=name, email=email, hashed_password=hashed_password
    )
  File "D:\PROJECT_WA\src\domain\repositories\user_repository.py", line 59, in create_user
    return User.model_validate(payload)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "D:\PROJECT_WA\.venv\Lib\site-packages\pydantic\main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj,
        ^^^^
    ...<5 lines>...
        by_name=by_name,
        ^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for User
id
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
created_at
  Field required [type=missing, input_value={'name': 'str', 'email': ...GgC6GLdhvqi/wLw/YLFUMi'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
